<ion-app>
  <ion-split-pane contentId="main-content">
    <ion-menu contentId="main-content" type="overlay" class="main-content">
      <ion-content>
        <ion-list id="inbox-list">
          <ion-note *ngIf="userInfo.username.length != 0" class="user_login"><span >Hoşgeldiniz {{userInfo.username}}</span></ion-note>
          <ion-menu-toggle auto-hide="false">
            <ion-item  (click)="selectedIndex = 0" routerDirection="root" routerLink="home" lines="none" detail="false" [class.selected]="selectedIndex == 0">
              <ion-icon  slot="start" [ios]="'home-outline'" [md]="'home-sharp'"></ion-icon>
              <ion-label>Anasayfa</ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-list *ngFor="let collection of collections ; let i = index" >
            <ion-item class="menu_princ" (click)="selectedIndex = i+1" routerDirection="root" [routerLink]="['/categorie/'+collection.id]" lines="none" detail="false" [class.selected]="selectedIndex == i+1" (click)="isRemainder === 1 ? isRemainder = 0 : isRemainder = 1" *ngIf="findByCollection(collection.id).length == 0">
              <ion-icon name="bookmarks-outline" slot="start"></ion-icon>
              {{collection.name}}
            </ion-item>
            <ion-item class="menu_princ" (click)="selectedIndex = i+1" lines="none" (click)="collection.child === 1 ? collection.child = 0 : collection.child = 1" *ngIf="findByCollection(collection.id).length > 0" [class.selected]="selectedIndex == i+1">
              <ion-icon name="bookmarks-outline" slot="start"></ion-icon>
              {{collection.name}}
              <ion-icon slot="end" [name]="collection.child? 'chevron-up-outline' : 'chevron-down-outline'"></ion-icon>
            </ion-item>
      
            <ion-list *ngIf="findByCollection(collection.id).length > 0">
              <ion-list   *ngFor="let subcat of findByCollection(collection.id)"   [hidden]="!collection.child">
                <ion-menu-toggle class="sub-menu" auto-hide="false" *ngIf="subcat.subcategories.length == 0">
                  <ion-item  menuclose  routerDirection="root" [routerLink]="['/categorie/'+subcat['id']]" lines="none" detail="false"  >
                    <ion-icon name="bookmark-outline" ></ion-icon>
                    {{subcat.name}}
                  </ion-item>
                </ion-menu-toggle>
                <ion-item  class="sub-menu" lines="none"  (click)="subcat.child === 1 ? subcat.child = 0 : subcat.child = 1" *ngIf="subcat.subcategories.length > 0">
                  <ion-icon name="bookmark-outline" ></ion-icon>
                  {{subcat.name}}
                  <ion-icon slot="end" [name]="subcat.child? 'chevron-down-outline' : 'chevron-up-outline'"></ion-icon>
                </ion-item>
                <ion-menu-toggle auto-hide="false" *ngIf="subcat.subcategories.length > 0" class="sub-sub-menu"  [hidden]="subcat.child">
                    <ion-item menuclose  *ngFor="let subcat1 of subcat.subcategories" [routerLink]="['/categorie/'+subcat1['id']]" menuClose class="sub-sub-menu">
                      <ion-icon name="basket-outline"></ion-icon>
                      {{subcat1['name']}}
                    </ion-item>
                </ion-menu-toggle>
              </ion-list>
            </ion-list>
          </ion-list>
        </ion-list>

        <ion-list id="labels-list">
          <ion-item lines="none" routerLink="/about" (click)="selectedIndex = 100" [class.selected]="selectedIndex == 100">
            <ion-icon slot="start" ios="information-circle-outline" md="information-circle-sharp"></ion-icon>
            <ion-label>İletişim</ion-label>
          </ion-item>
          <ion-item lines="none" *ngIf="userInfo.username.length == 0" routerLink="/login" (click)="selectedIndex = 101" [class.selected]="selectedIndex == 101">
            <ion-icon slot="start" ios="person-circle-outline" md="person-circle-sharp"></ion-icon>
            <ion-label>Oturum aç</ion-label>
          </ion-item>
          <ion-item lines="none" *ngIf="userInfo.username.length == 0" routerLink="/signup" (click)="selectedIndex = 102" [class.selected]="selectedIndex == 102">
            <ion-icon slot="start" ios="people-outline" md="people-sharp"></ion-icon>
            <ion-label>Kaydol</ion-label>
          </ion-item>
          <ion-item lines="none" *ngIf="userInfo.username.length != 0" routerLink="/about" (click)="selectedIndex = 103" [class.selected]="selectedIndex == 103">
            <ion-icon slot="start" ios="notifications-outline" md="notifications-outline"></ion-icon>
            <ion-label>Emirler</ion-label>
          </ion-item>
          <ion-item lines="none" (click)="logout()" *ngIf="userInfo.username.length != 0" (click)="selectedIndex = 104" [class.selected]="selectedIndex == 104">
            <ion-icon slot="start" ios="exit-outline" md="exit-sharp"></ion-icon>
            <ion-label> Çıkış Yap</ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-menu>
    <ion-router-outlet id="main-content"></ion-router-outlet>
    <ion-tabs>
      <ion-tab-bar slot="bottom">
        <ion-tab-button tab="cart">
          <ion-icon name="basket"></ion-icon>
          <ion-label>Cart</ion-label>
          <ion-badge>{{totalItems}}</ion-badge>
        </ion-tab-button>
        <ion-tab-button tab="about">
          <ion-icon name="information-circle"></ion-icon>
          <ion-label>İletişim</ion-label>
        </ion-tab-button>
          <ion-tab-button tab="login" *ngIf="userInfo.username.length == 0">
            <ion-icon name="person-circle"></ion-icon>
            <ion-label> Oturum aç</ion-label>
          </ion-tab-button>
      
          <ion-tab-button tab="signup" *ngIf="userInfo.username.length == 0">
            <ion-icon name="people"></ion-icon>
            <ion-label> Kaydol</ion-label>
          </ion-tab-button>
          <ion-tab-button tab="about" *ngIf="userInfo.username.length != 0">
            <ion-icon name="notifications-outline"></ion-icon>
            <ion-label> Emirler</ion-label>
          </ion-tab-button>
      
          <ion-tab-button (click)="logout()" *ngIf="userInfo.username.length != 0">
            <ion-icon name="exit"></ion-icon>
            <ion-label> Çıkış Yap</ion-label>
          </ion-tab-button>
        
      </ion-tab-bar>
    </ion-tabs>
  </ion-split-pane>
  <ion-fab slot="fixed" vertical="bottom" horizontal="end" #fab class="social-media">
    <ion-fab-button>
      <ion-icon name="share-social"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button color="youtube" (click)="openSocial(companyYoutube)">
        <ion-icon name="logo-youtube"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="instagram" (click)="openSocial(companyInstagram)">
        <ion-icon name="logo-instagram"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="twitter" (click)="openSocial(companyTwitter)">
        <ion-icon name="logo-twitter"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="facebook" (click)="openSocial(companyFb)">
        <ion-icon name="logo-facebook"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>
</ion-app>
